# Интеграция системы сессий в рабочий процесс

## Цели
- Автоматизировать управление сессиями (ai_sessions.json, current_session.json, worklog.json)
- Обеспечить удобную подгрузку контекста и инструкций для LLM и пользователя при старте/переключении ветки
- Сделать работу с задачами, идеями, инсайтами и логами максимально прозрачной и воспроизводимой

---

## Необходимые шаги

### 1. Связка JSON
- current_session.json всегда отражает активную ветку/сессию (обновляется при git checkout или вручную)
- ai_sessions.json содержит все метаданные, связи, кеш знаний, summary по каждой сессии
- worklog.json — лог событий, решений, важных изменений по текущей сессии
- knowledge_cache (в ai_sessions.json) — список файлов, которые должны быть под рукой для LLM и пользователя

### 2. Для человека
- При старте новой ветки/сессии — добавлять запись в ai_sessions.json, обновлять current_session.json
- Вести worklog.json: фиксировать ключевые события, решения, проблемы, инсайты
- Использовать knowledge_cache для быстрого доступа к нужным файлам и инструкциям
- При завершении сессии — писать краткое summary и переносить нерешённые задачи/идеи в backlog

### 3. Для LLM (инструкции)
- При инициализации сессии подгружать:
  - knowledge_cache (список файлов)
  - context_notes (краткие инструкции и напоминания)
  - summary предыдущих сессий (если нужно для контекста)
- Использовать current_session.json для определения, что сейчас в фокусе
- При генерации новых идей/задач/инсайтов — логировать их в worklog.json и ai_sessions.json

### 4. Автоматизация (рекомендации)
- Добавить скрипты для переключения сессий (обновление current_session.json, логирование в worklog.json)
- Встроить в pre-commit/pre-push hook проверку актуальности current_session.json
- Добавить CLI-команду для вывода summary по текущей сессии и быстрого доступа к knowledge_cache
- Обновить документацию и схемы (schema/core.json) для поддержки новых файлов

---

## TODO
- [ ] Внедрить автоматическое обновление current_session.json при git checkout ветки
- [ ] Добавить CLI/скрипт для логирования событий в worklog.json
- [ ] Обновить документацию по работе с сессиями
- [ ] Добавить валидацию структуры новых файлов в validate_schemas.py
